<!-- Animación de carga -->
<app-loading-animation *ngIf="isLoading"></app-loading-animation>

<div class="app-container">
    <div class="main-content-container">
        <div class="content-container">
            <header class="header">
                <h1>CLIENTES</h1>
                
                <div class="header-actions">
                    <!-- Barra de búsqueda -->
                    <div class="search-container">
                        <input 
                            type="text" 
                            class="search-input" 
                            placeholder="Buscar por nombre, apellido, DNI o teléfono..." 
                            [(ngModel)]="searchTerm"
                            (input)="onSearch()"
                        />
                        <button class="search-button" (click)="onSearch()">
                            <i class="fas fa-search"></i>
                        </button>
                        <!-- Botón para limpiar búsqueda (aparece cuando hay texto) -->
                        <button 
                            *ngIf="searchTerm" 
                            class="clear-search-btn" 
                            (click)="clearSearch()"
                            title="Limpiar búsqueda"
                        >
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <!-- Botón para exportar PDF -->
                    <button class="btn-export-pdf" (click)="exportPdf()">
                        <i class="fas fa-download"></i>
                        EXPORTAR PDF
                    </button>
                    
                    <!-- Botón para mostrar formulario modal -->
                    <button class="btn-add-client" (click)="onCreateNew()">
                        <i class="fas fa-plus"></i>
                        AGREGAR CLIENTE
                    </button>

                    <!-- Botón de notificaciones -->
                    <button class="btn-notification" title="Notificaciones">
                        <i class="fas fa-bell"></i>
                    </button>

                    <!-- Botón de perfil con nombre -->
                    <button class="btn-profile" title="Perfil">
                        <i class="fas fa-user-circle"></i>
                        <span class="profile-name">Nire</span>
                    </button>
                </div>
            </header>

            <section class="content">
                <!-- Solo la lista de clientes (ocupa todo el ancho) -->
                <app-client-list #clientListComponent></app-client-list>
            </section>
        </div>
    </div>
</div>

<!-- MODAL DEL FORMULARIO -->
<div class="modal-overlay" *ngIf="showForm" (click)="onModalBackdropClick($event)">
    <div class="modal-container" (click)="$event.stopPropagation()">
        <button class="modal-close-btn" (click)="onFormCancelled()">
            <i class="fas fa-times"></i>
        </button>
        
        <app-client-form
            [client]="selectedClient"
            (saved)="onFormSaved()"
            (cancelled)="onFormCancelled()">
        </app-client-form>
    </div>
</div>